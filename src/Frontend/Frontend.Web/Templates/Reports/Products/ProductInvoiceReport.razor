@page "/report/product-invoice/{productId}"
@using Backend.Domain.Entities.Reports;

<div class="d-print-none">
    <Frontend.Web.Components.Reports.Forms.ReportTools TemplateSettingsChanged="SetCustomReportSettings" />
</div>

<div class="container-fluid">
    <div class="row">
        <div class="report" id="reportContent">
            <h1>Report</h1>
            <div class="info">
                <p><strong>Invoice Number:</strong> INV-123456</p>
                <p><strong>Date:</strong> March 28, 2024</p>
                <p><strong>Due Date:</strong> April 10, 2024</p>
                <p><strong>Customer:</strong> John Doe</p>
                <p><strong>Email:</strong> john@example.com</p>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Description</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Product A</td>
                        <td>2</td>
                        <td>$50.00</td>
                        <td>$100.00</td>
                    </tr>
                    <tr>
                        <td>Product B</td>
                        <td>1</td>
                        <td>$80.00</td>
                        <td>$80.00</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3">Subtotal</td>
                        <td>$180.00</td>
                    </tr>
                    <tr>
                        <td colspan="3">Tax (10%)</td>
                        <td>$18.00</td>
                    </tr>
                    <tr>
                        <td colspan="3">Total</td>
                        <td>$198.00</td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
<style>
    .report {
        max-width: 800px;
        margin: 0 auto;
        border: 1px solid #212529;
        padding: 20px;
        border-radius: 5px;
    }

        .report h1 {
            font-size: @(CustomSettings.FontTitleSize)px;
            text-align: center;
        }

        .report .info {
            margin-bottom: 20px;
        }

            .report .info p {
                margin: 5px 0;
            }

        .report table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .report th, .report td {
            border: 1px solid #212529;
            padding: 8px;
            text-align: left;
        }

        .report tfoot {
            font-weight: bold;
        }
</style>

@code 
{
    [Parameter]
    public string productId { get; set; }
}

@code {
    // Assuming other parts of your parent component remain the same.

    public TemplateSettings CustomSettings = new TemplateSettings();

    // Adjust the method signature to async Task and update it to be compatible with EventCallback
    private Task SetCustomReportSettings(TemplateSettings templateSettings)
    {
        CustomSettings = templateSettings;
        StateHasChanged(); // Call StateHasChanged to refresh the UI if needed.
        return Task.CompletedTask;
    }

}
