@page "/agents/edit/{agentId}"
@using Backend.Domain.Entities.Agents;
@using Frontend.Web.Services.Agents;
@using Frontend.Web.Services.Authentication;
@inject NavigationManager NavigationManager
@inject AgentService _agentService
@inject AuthenticationService _authenticationService;

<PageTitle>Aurora - Edit Agent</PageTitle>

<div class="container-fluid">
    <Frontend.Web.Components.Agents.Forms.Edit.EditAgent Agent="Model.Agent" />
    <div class="card card-body">
        @if (string.IsNullOrEmpty(Model.Agent.ProfileId.ToString()))
        {
            <a @onclick="ShowProfileComponent">Create agent profile</a>
        }
        @if (isProfileComponent)
        {
            <h1>Aqui vai o component massa</h1>
        }
    </div>
    aqui mais embaixo vao pra adicionar coisas de contato no caso numero de telefone e email
</div>

@code
{
    [Parameter]
    public string agentId { get; set; }
}

@code
{
    public bool isProfileComponent { get; set; }
    public void ShowProfileComponent() => isProfileComponent = !isProfileComponent;
}

@code
{
    public AgentDetail Model = new AgentDetail();
    protected override async Task OnInitializedAsync()
    {
        var context = await _authenticationService.GetContext();
        Model = await _agentService.GetAgentWithDetail(context.Tenant.Id.ToString(), agentId.ToString());
    }
}
